!function(e,a,t){"use strict";function i(e){function a(){var e=this.contentWindow,a=e||this.contentDocument;a&&a.document&&(a=a.document),null!==a&&(a.body.style.overflow="hidden")}function i(e){if(e.preventDefault(),""===c)return!1;var t=this,i=t.parentNode,l=document.querySelector(".is-playing"),r=i.querySelector("iframe"),n=t.getAttribute("data-autoplay");c=t.getAttribute("data-url"),n||(n=c),null!==l&&(l.className=l.className.replace(/(\S+)playing/,"")),i.className+=" is-playing",o=document.createElement("iframe"),o.className="media__iframe media__element",o.setAttribute("src",c.indexOf("/oembed")>0?c:n),o.setAttribute("allowfullscreen",!0),null!==r&&i.removeChild(r),c.indexOf("/oembed")>0&&o.addEventListener("load",a),i.appendChild(o)}function l(e){e.preventDefault();var a=this,t=a.parentNode,i=t.querySelector("iframe.media__element");t.className.match("is-playing")&&(t.className=t.className.replace(/(\S+)playing/,"")),null!==i&&t.removeChild(i)}var r=e,n=r.querySelector("iframe"),d=r.querySelector(".media__icon--play");if(null===d)return void(n&&n.getAttribute("data-src")&&n.getAttribute("data-src").indexOf("/oembed")>0&&n.addEventListener("load",a));var o,c=d.getAttribute("data-url");null!==n&&null!=n.parentNode&&n.parentNode.removeChild(n),t.on(r,"click",".media__icon--play",i),t.on(r,"click",".media__icon--close",l),r.className+=" media--player--on"}a.theme.blazyMedia=function(e){var i,l=e.el,r=l.getAttribute("data-media")?t.parse(l.getAttribute("data-media")):{},n=l.querySelector("img"),d=null!==n?n.getAttribute("alt"):"Video preview",o=Math.round(r.height/r.width*100,2),c=l.getAttribute("data-box-url"),m=l.getAttribute("href");return i='<div class="media-wrapper media-wrapper--inline" style="width:'+r.width+'px">',i+='<div class="media media--switch media--player media--ratio media--ratio--fluid" style="padding-bottom: '+o+'%">',i+='<img src="'+c+'" class="media__image media__element" alt="'+a.t(d)+'"/>',i+='<span class="media__icon media__icon--close"></span>',i+='<span class="media__icon media__icon--play" data-url="'+m+'" data-autoplay="'+m+'"></span>',i+="</div></div>"},a.behaviors.blazyMedia={attach:function(e){var a=document.querySelectorAll(".media--switch.media--player:not(.media--player--on)");t.once(t.forEach(a,i))}}}(jQuery,Drupal,dBlazy);
